<div class="container">
  <div class="notification chat-box">
    <a ui-sref="eventsShow({ id: vm.group.eventId })"><h1>GO TO EVENT</h1></a>
    <a ui-sref="usersShow({ id: main.user._id })"><h1>GO TO TO PROFILE</h1></a>
    <div class ="chat-header">
      <h3><b>CHAT:</b> {{ vm.group.name}} chat</h3>
      <h3><b>IMAGE:</b><div class ="chat-img" style="background-image: url('{{ vm.group.image}}');"></div></h3>
      <h3><b>DESCRIPTION:</b> {{ vm.group.description}} </h3>
    </div>
    <ul>
      <li class="column notification is-info" ng-repeat="comment in vm.group.comments">
        <p>Author: {{ comment.createdBy.userName }}</p>
        <div class ="nav-img notification is-info" style="background-image: url('{{ comment.createdBy.image }}');"></div>
        <p>Comment: {{ comment.body }}</p>
        <p>Time: {{ comment.createdAt | date:"MM/dd/yyyy 'at' h:mma" | lowercase }}</p>
        <button class="button is-link" ng-click="vm.commentDelete(comment)" ng-if="main.user._id === comment.createdBy.id">Delete</button>
      </li>
    </ul>
  </section>


  <p ng-if="!vm.membersArray.includes(main.user._id)">To comment, please join the chat</p>
  <form ng-submit="vm.commentCreate()" ng-if="vm.membersArray.includes(main.user._id)">
    <div class="field">
      <label class="label">Comment</label>
      <div class="control">
        <textarea class="textarea" placeholder="your comment..." ng-model="vm.comment.body"></textarea>
      </div>
        <button class="button is-link">Submit</button>
    </div>
  </form>

  <div class="control">
    <p class="button is-link" ng-click="vm.updateGroup()">
      <span ng-if="!vm.membersArray.includes(main.user._id)">Join</span>
      <span ng-if="vm.membersArray.includes(main.user._id)">Leave</span> Group
    </p>
  </div>

</div>
